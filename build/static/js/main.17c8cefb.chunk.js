(this["webpackJsonpcasa-codigo"]=this["webpackJsonpcasa-codigo"]||[]).push([[0],{123:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(39),c=a.n(o),i=(a(48),a(17)),l=a(13),s=a(8),u=a(3),m=a(4),h=a(6),d=a(5),v=a(7),p=(a(49),a(50),function(e){return r.a.createElement(i.b,Object.assign({activeStyle:{fontWeight:"bold"}},e))}),f=function(){return r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper indigo lighten-2"},r.a.createElement(p,{to:"/",className:"brand-logo"},"Livraria"),r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(p,{to:"/autores"},"Autores")),r.a.createElement("li",null,r.a.createElement(p,{to:"/livros"},"Livros")),r.a.createElement("li",null,r.a.createElement(p,{to:"/sobre"},"Sobre")))))},b=function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Autores"),r.a.createElement("th",null,"Livros"),r.a.createElement("th",null,"Pre\xe7os"),r.a.createElement("th",null,"Remover")))},E=function(e){var t=e.autores.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.nome),r.a.createElement("td",null,t.livro),r.a.createElement("td",null,t.preco),r.a.createElement("td",null,r.a.createElement("button",{className:"waves-effect waves-light btn indigo lighten-3",onClick:function(){e.removeAutor(t.id)}},"Remover")))}));return r.a.createElement("tbody",null,t)},g=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.autores,a=e.removeAutor;return r.a.createElement("table",{className:"centered highlight"},r.a.createElement(b,null),r.a.createElement(E,{autores:t,removeAutor:a}))}}]),t}(r.a.Component),O=a(18),j=a(42),y=a.n(j);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var w=function(){function e(t){Object(u.a)(this,e),this.validacoes=t}return Object(m.a)(e,[{key:"valida",value:function(e){var t=this.valido();return this.validacoes.forEach((function(a){var n=e[a.campo.toString()],r=a.args||[];("string"===typeof a.metodo?y.a[a.metodo]:a.metodo).apply(void 0,[n].concat(Object(s.a)(r),[e]))!==a.validoQuando&&(t[a.campo]={isInvalid:!0,message:a.mensagem},t.isValid=!1)})),t}},{key:"valido",value:function(){var e={};return this.validacoes.map((function(t){return e[t.campo]={isInvalid:!1,message:""}})),function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach((function(t){Object(O.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({isValid:!0},e)}}]),e}(),N=a(24),k=a.n(N),P={exibeMensagem:function(e,t){"success"===e&&k.a.toast({html:t,classes:"green",displayLength:2e3}),"error"===e&&k.a.toast({html:t,classes:"red",displayLength:2e3})}},S=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).inputFormulario=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(O.a)({},n,r))},a.submitForm=function(){var e=a.validator.valida(a.state);e.isValid?(a.props.enviaForm(a.state),a.setState(a.stateInicial)):[e.nome,e.livro,e.preco].filter((function(e){return e.isInvalid})).forEach((function(e){P.exibeMensagem("error",e.message)}))},a.validator=new w([{campo:"nome",metodo:"isEmpty",validoQuando:!1,mensagem:"Entre com um nome"},{campo:"livro",metodo:"isEmpty",validoQuando:!1,mensagem:"Entre com um livro"},{campo:"preco",metodo:"isInt",args:[{min:0,max:99999}],validoQuando:!0,mensagem:"Entre com um valor numerico"}]),a.stateInicial={nome:"",livro:"",preco:"",validacao:a.validator.valido()},a.state=a.stateInicial,a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.nome,a=e.livro,n=e.preco;return r.a.createElement("form",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s4"},r.a.createElement("label",{htmlFor:"nome"}),r.a.createElement("input",{placeholder:"Nome",id:"nome",type:"text",name:"nome",value:t,onChange:this.inputFormulario})),r.a.createElement("div",{className:"input-field col s4"},r.a.createElement("label",{htmlFor:"livro"}),r.a.createElement("input",{placeholder:"Livro",id:"livro",type:"text",name:"livro",value:a,onChange:this.inputFormulario})),r.a.createElement("div",{className:"input-field col s4"},r.a.createElement("label",{htmlFor:"preco"}),r.a.createElement("input",{placeholder:"Pre\xe7o",id:"preco",type:"text",name:"preco",value:n,onChange:this.inputFormulario}))),r.a.createElement("button",{className:"waves-effect waves-light btn indigo lighten-3",type:"button",onClick:this.submitForm},"Salvar"))}}]),t}(r.a.Component),x={listaAutores:function(){return fetch("http://localhost:8000/api/autor")},criaAutor:function(e){return fetch("http://localhost:8000/api/autor",{method:"POST",headers:{"content-type":"application/json"},body:e})},listaNomes:function(){return fetch("http://localhost:8000/api/autor/nome")},listaLivros:function(){return fetch("http://localhost:8000/api/autor/livro")},removeAutor:function(e){return fetch("http://localhost:8000/api/autor/".concat(e),{method:"DELETE",header:{"content-type":"application/json"}})},trataErro:function(e){if(!e.ok)throw new Error(e.responseText);return e.json()}},C=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).removeAutor=function(e){var t=a.state.autores.filter((function(t){return t.id!==e}));x.removeAutor(e).then((function(e){return x.trataErro(e)})).then((function(e){"deleted"===e.message&&(a.setState({autores:Object(s.a)(t)}),P.exibeMensagem("error","Autor removido com sucesso!"))})).catch((function(e){return P.exibeMensagem("error","Erro em comunica\xe7\xe3o com API ao remover autor.")}))},a.enviaForm=function(e){x.criaAutor(JSON.stringify(e)).then((function(e){return x.trataErro(e)})).then((function(t){"success"===t.message&&(a.setState({autores:[].concat(Object(s.a)(a.state.autores),[e])}),P.exibeMensagem("success","Autor adicionado com sucesso!"))})).catch((function(e){return P.exibeMensagem("error","Erro em comunica\xe7\xe3o com API ao adicionar autor.")}))},a.state={autores:[]},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.listaAutores().then((function(e){return x.trataErro(e)})).then((function(t){"success"===t.message&&e.setState({autores:[].concat(Object(s.a)(e.state.autores),Object(s.a)(t.data))})})).catch((function(e){return P.exibeMensagem("error","Erro em comunica\xe7\xe3o com API ao tentar carregar a listagem.")}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f,null),r.a.createElement("div",{className:"mb-10"},r.a.createElement("h1",null,"Sistema de Cadastro"),r.a.createElement(S,{enviaForm:this.enviaForm}),r.a.createElement(g,{autores:this.state.autores,removeAutor:this.removeAutor})))}}]),t}(r.a.Component),F=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"sobre"},r.a.createElement(f,null),r.a.createElement("h1",null,"Sobre"),r.a.createElement("p",null,"Esta p\xe1gina representa um projeto criado por ",r.a.createElement("a",{href:"https://github.com/rcarnevale"},"Rodrigo Carnevale"),"."),r.a.createElement("p",null,"O objetivo \xe9 criar uma SPA para cadastro de livros e autores de uma livraria. "),r.a.createElement("p",null,"Para ser testado completamente, \xe9 necessaria a instala\xe7\xe3o de uma api pr\xf3pria dispon\xedvel juntamente com a build no ",r.a.createElement("a",{href:"https://github.com/rcarnevale/livraria-cadastro"},"reposit\xf3rio"),"."),r.a.createElement("p",null,"Tamb\xe9m est\xe3o dispon\xedveis, no mesmo reposit\xf3rio, alguns branches com o c\xf3digo antes da build final, a fim de registrar o progresso."))}}]),t}(r.a.Component),I=function(e){var t=e.dados.map((function(t){return r.a.createElement("tr",null,e.colunas.map((function(e){return r.a.createElement("td",null," ",t[e]," ")})))}));return r.a.createElement("table",{className:"centered highlight"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,e.titulo))),r.a.createElement("tbody",null,t))},M=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={livros:[],titulo:"Livros"},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.listaLivros().then((function(e){return x.trataErro(e)})).then((function(t){"success"===t.message&&e.setState({livros:[].concat(Object(s.a)(e.state.livros),Object(s.a)(t.data))})})).catch((function(e){return P.exibeMensagem("error","Erro em comunica\xe7\xe3o com API ao tentar carregar a listagem.")}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"livros"},r.a.createElement(f,null),r.a.createElement("div",{className:"mb-10"},r.a.createElement(I,{dados:this.state.livros,titulo:this.state.titulo,colunas:["livro"]})))}}]),t}(r.a.Component),L=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={nomes:[],titulo:"Autores"},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.listaNomes().then((function(e){return x.trataErro(e)})).then((function(t){"success"===t.message&&e.setState({nomes:[].concat(Object(s.a)(e.state.nomes),Object(s.a)(t.data))})})).catch((function(e){return P.exibeMensagem("error","Erro em comunica\xe7\xe3o com API ao tentar carregar a listagem.")}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"autores"},r.a.createElement(f,null),r.a.createElement("div",{className:"mb-10"},r.a.createElement(I,{dados:this.state.nomes,titulo:this.state.titulo,colunas:["nome"]})))}}]),t}(r.a.Component),D=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"not-found"},r.a.createElement(f,null),r.a.createElement("h1",null,"P\xe1gina n\xe3o encontrada"))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:C}),r.a.createElement(l.a,{path:"/autores",component:L}),r.a.createElement(l.a,{path:"/livros",component:M}),r.a.createElement(l.a,{path:"/sobre",component:F}),r.a.createElement(l.a,{component:D}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},43:function(e,t,a){e.exports=a(123)},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){}},[[43,1,2]]]);
//# sourceMappingURL=main.17c8cefb.chunk.js.map